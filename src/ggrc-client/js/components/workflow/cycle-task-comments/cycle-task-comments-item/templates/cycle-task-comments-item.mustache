{{!
    Copyright (C) 2018 Google Inc.
    Licensed under http://www.apache.org/licenses/LICENSE-2.0 <see LICENSE file>
}}

<li
  data-object-id="{{comment.id}}"
  data-object-type="{{comment.class.table_singular}}"
  class="clearfix">
  <span class="status-label status-"></span>
  <div class="w-status">
    {{{comment.description}}}
    <div class="evidence-list">
      <related-documents {instance}="comment" document-type="EVIDENCE">
        <object-list {items}="documents">
          <editable-document-object-list-item {document}="{.}">
            {{^if_equals instance.status 'Verified'}}
              <unmap-button
                (unmapped)="loadDocuments()"
                {destination}="comment"
                {source}="document">
                <action-toolbar-control>
                  <i class="fa fa-trash"></i>
                </action-toolbar-control>
              </unmap-button>
            {{/if}}
          </editable-document-object-list-item>
        </object-list>
      </related-documents>
    </div>
    <span class="entry-author">
      Modified by
      {{#using person=comment.modified_by}}{{>'/static/mustache/people/popover.mustache'}}{{/using}}
      {{#if comment.created_at}}on {{date comment.created_at}}{{/if}}
    </span>
  </div>

  <div class="entry-actions pull-right">
    <a class="dropdown-toggle" href="#" data-toggle="dropdown"><i class="fa fa-cog"></i></a>
    <ul class="dropdown-menu" aria-labelledby="drop1" role="menu">
      <li>
        {{^if_equals instance.status 'Verified'}}
          <a href="javascript://" data-toggle="modal-ajax-form" data-modal-reset="reset" data-modal-class="modal-wide" data-object-singular="CycleTaskEntry" data-object-plural="{{instance.class.table_plural}}" data-object-id="{{instance.id}}">
            <i class="fa fa-pencil-square-o"></i>
            Edit Comment
          </a>
        {{/if_equals}}
      </li>
      <li>
        {{^if_equals instance.status 'Verified'}}
            {{#is_allowed 'delete' comment}}
            <a data-toggle="modal-ajax-deleteform" data-object-plural="{{comment.class.table_plural}}" data-object-singular="CycleTaskEntry" data-modal-reset="reset" data-modal-class="modal" data-object-id="{{instance.id}}" href="javascript://">
              <i class="fa fa-trash"></i>
              Delete Comment
            </a>
          {{/is_allowed_all}}
        {{/if_equals}}
      </li>
    </ul>
  </div><!-- entry-actions end -->
</li>
